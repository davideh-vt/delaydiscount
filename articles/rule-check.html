<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>rule-check â€¢ delaydiscount</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rule-check">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">delaydiscount</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/delaydiscount.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rule-check.html">rule-check</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davideh-vt/delaydiscount/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>rule-check</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davideh-vt/delaydiscount/blob/master/vignettes/rule-check.Rmd" class="external-link"><code>vignettes/rule-check.Rmd</code></a></small>
      <div class="d-none name"><code>rule-check.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/davideh-vt/delaydiscount" class="external-link">delaydiscount</a></span><span class="op">)</span></span></code></pre></div>
<p>TODO: This file should include the entire workflow and not just the
rule check. However, I do not want to add it until I finish it for the
main path (no rule check), since any edits will need to be copied
over.</p>
<p>The jb_rule_check function can be used to apply the rule check for
the purpose of filtering out subjects who fail.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">remedi_rc_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/jb_rule_check.html">jb_rule_check</a></span><span class="op">(</span><span class="va">remedi</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">remedi_rc_result</span><span class="op">)</span></span>
<span><span class="co">#&gt;    group     subj   C1    C2</span></span>
<span><span class="co">#&gt; 1    EFT 10458654 TRUE  TRUE</span></span>
<span><span class="co">#&gt; 8    EFT 10698816 TRUE  TRUE</span></span>
<span><span class="co">#&gt; 15   EFT 11624253 TRUE  TRUE</span></span>
<span><span class="co">#&gt; 22   EFT 11646612 TRUE  TRUE</span></span>
<span><span class="co">#&gt; 29   EFT 12088534 TRUE  TRUE</span></span>
<span><span class="co">#&gt; 36   EFT 12691633 TRUE FALSE</span></span></code></pre></div>
<p>The resulting data frame has an observation for each
subject-within-group, with variables corresponding to whether or not
each rule was passed. A value of TRUE indicates that the rule check was
passed.</p>
<p>C1 fails if there are two or more increases in the indifference point
of 20% of the total amount between consecutive time points. C2 fails if
the difference in the indifference point between the first and last time
points is not more than 10% of the total amount.</p>
<p>In order to make use of the rule check results, after the data frame
is prepared, the rule check data can be merged with the original
dataframe, and then observations corresponding to subjects who failed
the rule check can be removed from the data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">remedi_with_rc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">remedi</span>, <span class="va">remedi_rc_result</span><span class="op">)</span></span>
<span><span class="va">remedi_rc_pass</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">remedi_with_rc</span>, </span>
<span>                                <span class="va">C1</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="va">C2</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>After that, the remainder of the workflow proceeds as it would
otherwise.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Hinds, Marco Ferreira.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
